#你的程式答案
rm(list=ls())
library(dplyr)
library(psych)
library(haven)
wage1 <- read_dta("http://fmwww.bc.edu/ec-p/data/wooldridge/wage1.dta")
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
wage1 %>% lm(lwage~educ,data=.)
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
wage1 %>%
lm(lwage~educ+exper+profocc,data=.)
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
summarise(low,mean(wage))
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
summarise(med,mean(wage))
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(high,mean(wage))
View(wage1)
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(low,med,high,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(low+med+high,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
select_all(low,med,high) %>%
mean(wage) %>%
table()
dplyr::filter(wage1,educ==12) %>%
group_by() -> low
summarise(low,mean(wage))
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() -> med
summarise(med,mean(wage))
dplyr::filter(wage1,educ>16) %>%
group_by() -> high
summarise(high,mean(wage))
low ->
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(low) %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(,low) %>%
summarise(mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by(low) %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
summarise(low,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
summarise(low,mean(wage))
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
View(high)
dplyr::filter(wage1,cut(12,16),lable="low","med","high")
dplyr::filter(wage1,cut(12,16),lable=="low","med","high")
dplyr::filter(wage1,cut(12,16),lables="low","med","high")
dplyr::filter(wage1,cut(12,16),lables=(low,"med","high"))
dplyr::filter(wage1,cut(12,16),lables=("low","med","high"))
dplyr::filter(wage1,cut(12,16))
wage1$wage %>%
cut(12,16)
wage1$wage %>%
cut(12:16)
aaa <- c(1,2,3,4,5,2,3,4,5,6,7)
cut(aaa, 3)
dplyr::filter(wage1,educ==12) %>%
group_by() %>%
summarise(mean(wage)) ->low
dplyr::filter(wage1,between(educ,12,16)) %>%
group_by() %>%
summarise(mean(wage)) ->med
dplyr::filter(wage1,educ>16) %>%
group_by() %>%
summarise(mean(wage)) ->high
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,wage) %>%
pairs.panels()
```{r}
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(educ,lwage) %>%
pairs.panels()
wage1 %>%
select(educ,wage) %>%
psych::pairs.panels()
wage1 %>% mutate(ledu=log(educ))-> wage1
wage1 %>%
select(ledu,lwage) %>%
pairs.panels()
corr <- function(x) cor(x,wage1$educ)
wage1 %>%
summarise_all(corr)
$$log(wage)=\beta_0+\beta_1 educ+\epsilon$$
$$log(wage)=\beta_0+\beta_1 educ+\epsilon$$
log(wage)=\beta_0+\beta_1 educ+\epsilon$
log(wage)=\beta_0+\beta_1 educ+\epsilon
$log(wage)=\beta_0+\beta_1 educ+\epsilon$
rm(list=ls())
library(dplyr)
library(psych)
library(haven)
wage1 <- read_dta("http://fmwww.bc.edu/ec-p/data/wooldridge/wage1.dta")
wage1 %>% select(educ,wage) %>%
pairs.panels()
wage1 %>% select(educ,lwage) %>%
pairs.panels()
wage1 %>% lm(log(wage)~educ,data=.)
is_numeric<-function(x) all(is.numeric(x))
corr<-function(x) cor(x,wage1$educ)
wage1 %>%
select_if(is_numeric) %>%
summarise_all(corr)
wage1 %>% lm(log(wage)~educ+exper+smsa,data=.)
dplyr::filter(wage1,16>= educ&educ>=12) %>%
group_by(educ) %>%
summarise(mean_wage=mean(wage))
dplyr::filter(wage1,16>= educ&educ>=12) %>%
group_by(educ=cut(educ,breaks = c(12,13,16),include.lowest=F,right= F)) %>%
#將educ分隔區間[12,13),[13,16),其餘為educ=16
summarise(mean_wage=mean(wage))
dplyr::filter(wage1,16>= educ&educ>=12) %>%
group_by(educ=cut(educ,breaks = c(12,13,16),include.lowest=F,right= F)) %>%
summarise(n=n())
(8.04*68)/(68+113)+(6.03*113)/(68+113) -> university_wage
university_wage
6.785138-5.371364 -> difference_sch
difference_sch
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
library("AER")
library("dplyr")
library("magrittr")
labordata %<>% filter(YEAR==7)
ols1 <- lm(WKS~LWAGE,data=labordata)
plot(labordata$WKS, labordata$LWAGE, xlab="WKS", ylab="log(WAGE)")
labordata0 <- labordata %>% filter(UNION==0)
summary(labordata0$LWAGE)
summary(labordata0$WKS)
labordata1 <- labordata %>% filter(UNION==1)
summary(labordata1$LWAGE)
summary(labordata1$WKS)
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html",title="Regression Results")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1, ols2, type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols2,type="html")
ols1 <- lm(WKS~LWAGE,data=labordata)
ols1
plot(labordata$WKS, labordata$LWAGE, xlab="WKS", ylab="log(WAGE)")
ols1 <- lm(WKS ~ LWAGE,data=labordata)
ols1
plot(labordata$WKS, labordata$LWAGE, xlab="WKS", ylab="log(WAGE)")
ols1 <- lm(WKS~LWAGE,data=labordata)
ols1
plot(labordata$WKS, labordata$LWAGE, xlab="WKS", ylab="log(WAGE)")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
ols1
library(stargazer)
stargazer(ols1,ols2,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
ols2
ols1
library(stargazer)
stargazer(ols1,ols2,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html")
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
library("AER")
library("dplyr")
library("magrittr")
labordata %<>% filter(YEAR==7)
ols1 <- lm(WKS~LWAGE,data=labordata)
plot(labordata$WKS, labordata$LWAGE, xlab="WKS", ylab="log(WAGE)")
labordata0 <- labordata %>% filter(UNION==0)
summary(labordata0$LWAGE)
summary(labordata0$WKS)
labordata1 <- labordata %>% filter(UNION==1)
summary(labordata1$LWAGE)
summary(labordata1$WKS)
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html")
ols2 <- lm(WKS~LWAGE+ED+UNION+FEM,data=labordata)
library(stargazer)
stargazer(ols1,ols2,type="html")
knitr::opts_chunk$set(echo = TRUE)
journals %>%
lm(log(subs)~log(citeprice),data=.) -> model_1
knitr::opts_chunk$set(echo = TRUE)
library("AER")
library("ggplot2")
library("dplyr")
library("knitr")
data("Journals")
str(Journals)
Journals %>% mutate(citeprice=price/citations) -> journals
summary(journals)
Journals %>% mutate(
citeprice=price/citations    #期刊引用單價
) %>%
summary
library("psych")
journals %>%
dplyr::select(citeprice,subs,pages) %>% #函數在不同套件有一樣的名字，要寫清楚套件
pairs.panels   #直線和橫線交叉的數字。是兩變數的相關係數
journals %>%
dplyr::select(citeprice,subs) %>%
dplyr::mutate_all(log) %>%  #mutate_all: 對(前一步)選出的變數做動作(log) 成為新變數
pairs.panels
# 判斷所有變數是否為數值類別
is_numeric<-function(x) all(is.numeric(x))
# 計算訂閱數與citeprice的相關係數
cor_citeprice<-function(x) cor(x,journals$citeprice)   #$ :固定該欄的column
journals %>%
select_if(is_numeric) %>%
summarise_all(cor_citeprice) %>%   #_all : imply 到所有變數
kable()
journals %>%
lm(log(subs)~log(citeprice),data=.)
# equal to
# lm(log(subs)~log(citeprice),data=journals)
# equal to
# lm(log(subs)~log(citeprice),.)，見36行。
# equal to
# 邏輯上lm(journals,log(subs)~log(citeprice))
# 但這是錯的，因為 lm funtion 格式設定上，第一個要求 formula 而非 dataset
journals %>%
lm(log(subs)~log(citeprice)+foundingyear,data=.)
journals %>%
lm(log(subs)~log(citeprice),data=.) -> model_1
journals %>%
lm(log(subs)~log(citeprice)+foundingyear,data=.) -> model_2
library(sandwich)
library(lmtest)
library(stargazer)
#使用vcovHC函數來計算HC1型的異質變異（即橫斷面資料下的線性迴歸模型）
coeftest(model_1, vcov. = vcovHC, type="HC1")
coeftest(model_2, vcov. = vcovHC, type="HC1")
stargazer(model_1, model_2,
se=list(model_1_coeftest[,"Std. Error"], model_2_coeftest[,2]),  #se : 指定standard error 算法。即 se=list(model_1的standard error,model_2...)
type="html",                                                     #[,2] : 前面沒有數字，就是全取
align=TRUE)
journals %>%
lm(log(subs)~log(citeprice),data=.) -> model_1
journals %>%
lm(log(subs)~log(citeprice)+foundingyear,data=.) -> model_2
library(sandwich)
library(lmtest)
library(stargazer)
#使用vcovHC函數來計算HC1型的異質變異（即橫斷面資料下的線性迴歸模型）
coeftest(model_1, vcov. = vcovHC, type="HC1") -> model_1_coeftest
coeftest(model_2, vcov. = vcovHC, type="HC1") -> model_2_coeftest
stargazer(model_1, model_2,
se=list(model_1_coeftest[,"Std. Error"], model_2_coeftest[,"Std. Error"]),  #se : 指定standard error 算法。即 se=list(model_1的standard error,model_2...)
type="html",                                                     #[,2] : 前面沒有數字，就是全取
align=TRUE)
str(model_1_coeftest)
model_1_coeftest
journals %>%
lm(log(subs)~log(citeprice),data=.) -> model_1
journals %>%
lm(log(subs)~log(citeprice)+foundingyear,data=.) -> model_2
library(sandwich)
library(lmtest)
library(stargazer)
#使用vcovHC函數來計算HC1型的異質變異（即橫斷面資料下的線性迴歸模型）
coeftest(model_1, vcov. = vcovHC, type="HC1") -> model_1_coeftest
coeftest(model_2, vcov. = vcovHC, type="HC1") -> model_2_coeftest
stargazer(model_1, model_2,
se=list(model_1_coeftest[,"Std. Error"], model_2_coeftest[,"Std. Error"]),  #se : 指定standard error 算法。即 se=list(model_1的standard error,model_2...)
type="html",                                                     #[,2] : 前面沒有數字，就是全取
align=TRUE)
str(model_1_coeftest)
model_1_coeftest
knitr::opts_chunk$set(echo = TRUE,warning=F,message=F)
library(readr)
labordata <- read_csv("http://people.stern.nyu.edu/wgreene/Econometrics/cornwell&rupert.csv")
